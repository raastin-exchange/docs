---
sidebar_position: 2
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# تاریخچه واریز

<div dir="ltr" style={{textAlign: 'left'}}>

    GET /api/v1/deposit/list

</div>

:::info توضیح

این API برای دریافت لیست تاریخچه واریزهای ارز دیجیتال استفاده می‌شود. نتایج به صورت صفحه‌بندی شده برگردانده می‌شوند.

برای استفاده از این API لازم است توکن احراز هویت در header ارسال شود.

**پارامترهای Query (اختیاری):**
- `coin`: فیلتر بر اساس نماد ارز (مثال: BTC، ETH)
- `status`: فیلتر بر اساس وضعیت (PROCESS، DONE)
- `limit`: تعداد نتایج (پیش‌فرض: 20)
- `offset`: شروع از رکورد چندم (پیش‌فرض: 0)

:::

## پارامترهای Query (اختیاری)

| نام پارامتر | نوع    | اجباری | توضیح                                           | نمونه       |
|-------------|--------|--------|-------------------------------------------------|-------------|
| coin        | String | False  | نماد ارز برای فیلتر کردن                        | "BTC"       |
| status      | String | False  | وضعیت واریز (PROCESS, DONE)                     | "DONE"      |
| limit       | Integer| False  | تعداد نتایج (پیش‌فرض: 20)                       | 20          |
| offset      | Integer| False  | شروع از رکورد چندم (پیش‌فرض: 0)                 | 0           |

## ساختار پاسخ

**پاسخ صفحه‌بندی شده:**

| نام پارامتر | نوع    | توضیحات                                          | نمونه                                    |
|-------------|--------|--------------------------------------------------|------------------------------------------|
| count       | Integer| تعداد کل واریزها                                 | 25                                       |
| next        | String | لینک صفحه بعدی (null اگر صفحه آخر باشد)         | "/api/v1/deposit/list?limit=20&offset=20"|
| previous    | String | لینک صفحه قبلی (null اگر صفحه اول باشد)         | null                                     |
| results     | Array  | آرایه‌ای از واریزها                              | [...]                                    |

**ساختار هر واریز در results:**

| نام پارامتر   | نوع     | توضیحات                                        | نمونه                                                    |
|---------------|---------|------------------------------------------------|----------------------------------------------------------|
| id            | Integer | شناسه واریز                                     | 12345                                                    |
| created       | String  | تاریخ و زمان ایجاد                              | "2024-12-10T17:03:57.002570+03:30"                       |
| amount        | String  | مقدار واریز                                     | "0.05"                                                   |
| status        | String  | وضعیت واریز (PROCESS/DONE)                      | "DONE"                                                   |
| link          | String  | لینک مشاهده تراکنش در Explorer                  | "https://blockchair.com/bitcoin/transaction/..."         |
| out_address   | String  | آدرس واریز                                      | "bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh"            |
| memo          | String  | ممو/تگ (در صورت نیاز شبکه)                     | null                                                     |
| asset         | Object  | اطلاعات ارز واریزی                              | `{"symbol": "BTC", ...}`                                |
| network       | String  | نماد شبکه بلاکچین                               | "BTC"                                                    |
| trx_hash      | String  | هش تراکنش (Transaction Hash)                    | "a1b2c3d4e5f6..."                                        |
| fee_amount    | String  | مقدار کارمزد                                    | "0"                                                      |
| is_internal   | Boolean | آیا انتقال داخلی است                            | false                                                    |
| confirmation  | Integer | تعداد تاییدیه‌های شبکه                          | 6                                                        |
| min_confirm   | Integer | حداقل تاییدیه مورد نیاز                         | 3                                                        |
| unlock_confirm| Integer | تعداد تاییدیه برای آزادسازی                     | 3                                                        |

**ساختار asset:**

| نام پارامتر | نوع    | توضیحات          | نمونه     |
|-------------|--------|------------------|-----------|
| symbol      | String | نماد ارز         | "BTC"     |
| name        | String | نام انگلیسی      | "Bitcoin" |
| name_fa     | String | نام فارسی        | "بیت‌کوین"|
| logo        | String | آدرس لوگو        | "..."     |

```mdx-code-block
<Tabs
defaultValue="request"
values={[
{label: 'درخواست', value: 'request'},
{label: 'پاسخ', value: 'response'},
]}>
<TabItem value="request">
```

**مثال 1: دریافت همه واریزها:**
```bash
GET /api/v1/deposit/list
Authorization: Token YOUR_TOKEN
```

**مثال 2: فیلتر بر اساس ارز:**
```bash
GET /api/v1/deposit/list?coin=BTC
Authorization: Token YOUR_TOKEN
```

**مثال 3: فیلتر بر اساس وضعیت:**
```bash
GET /api/v1/deposit/list?status=DONE
Authorization: Token YOUR_TOKEN
```

```mdx-code-block
</TabItem>
<TabItem value="response">
```

```json
{
    "count": 25,
    "next": "/api/v1/deposit/list?limit=20&offset=20",
    "previous": null,
    "results": [
        {
            "id": 12345,
            "created": "2024-12-10T17:03:57.002570+03:30",
            "amount": "0.05",
            "status": "DONE",
            "link": "https://blockchair.com/bitcoin/transaction/a1b2c3d4...",
            "out_address": "bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh",
            "memo": null,
            "asset": {
                "symbol": "BTC",
                "name": "Bitcoin",
                "name_fa": "بیت‌کوین",
                "logo": "/media/coins/btc.png"
            },
            "network": "BTC",
            "trx_hash": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6",
            "fee_amount": "0",
            "is_internal": false,
            "confirmation": 6,
            "min_confirm": 3,
            "unlock_confirm": 3
        },
        {
            "id": 12344,
            "created": "2024-12-10T15:20:30.123456+03:30",
            "amount": "1.5",
            "status": "DONE",
            "link": "https://etherscan.io/tx/0x9f3b8e2d...",
            "out_address": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",
            "memo": null,
            "asset": {
                "symbol": "ETH",
                "name": "Ethereum",
                "name_fa": "اتریوم",
                "logo": "/media/coins/eth.png"
            },
            "network": "ETH",
            "trx_hash": "0x9f3b8e2d1c0a5f6e4d3c2b1a0f9e8d7c6b5a4f3e2d1c0b9a8f7e6d5c4b3a2f1e",
            "fee_amount": "0",
            "is_internal": false,
            "confirmation": 35,
            "min_confirm": 12,
            "unlock_confirm": 12
        },
        {
            "id": 12343,
            "created": "2024-12-10T14:10:15.654321+03:30",
            "amount": "1000",
            "status": "PROCESS",
            "link": "https://tronscan.org/#/transaction/b2c3d4e5...",
            "out_address": "TYDzsYUEpvnYmQk4zGP9sWWcTEd2MiAtW6",
            "memo": null,
            "asset": {
                "symbol": "USDT",
                "name": "Tether",
                "name_fa": "تتر",
                "logo": "/media/coins/usdt.png"
            },
            "network": "TRC20",
            "trx_hash": "b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0e1f2g3",
            "fee_amount": "0",
            "is_internal": false,
            "confirmation": 3,
            "min_confirm": 20,
            "unlock_confirm": 20
        }
    ]
}
```

```mdx-code-block
</TabItem>
</Tabs>
```

:::tip نکات مهم

### وضعیت‌های واریز:

- **PROCESS**: واریز در حال پردازش است (تعداد confirmations کافی نیست)
- **DONE**: واریز کامل شده و به کیف پول اضافه شده است

### تعداد تاییدیه‌ها (Confirmations):

هر ارز به تعداد تاییدیه خاصی نیاز دارد تا واریز تکمیل شود:
- **Bitcoin (BTC)**: معمولاً 3-6 تاییدیه
- **Ethereum (ETH)**: معمولاً 12-35 تاییدیه
- **USDT (TRC20)**: معمولاً 20 تاییدیه

زمانی که تعداد confirmations به حد نصاب برسد، وضعیت واریز به COMPLETED تغییر می‌کند.

### شبکه‌های مختلف:

برخی ارزها مثل USDT در چند شبکه قابل واریز هستند:
- TRC20 (Tron)
- ERC20 (Ethereum)
- BEP20 (BSC)

حتماً از شبکه صحیح استفاده کنید تا از از دست رفتن دارایی جلوگیری شود.

:::

:::caution نکته امنیتی

- هرگز آدرس واریز خود را به اشتباه با آدرس دیگران مشترک نکنید
- همیشه قبل از واریز، شبکه (network) را بررسی کنید
- هر آدرس واریز مخصوص یک ارز و شبکه خاص است

:::