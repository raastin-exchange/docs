---
sidebar_position: 2
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# تاریخچه واریز

<div style={{textAlign: 'left'}}>

    GET /api/v1/deposit/list

</div>

:::info توضیح

این API برای دریافت لیست تاریخچه واریزهای ارز دیجیتال استفاده می‌شود. نتایج به صورت صفحه‌بندی شده برگردانده می‌شوند.

برای استفاده از این API لازم است توکن احراز هویت در header ارسال شود.

**پارامترهای Query (اختیاری):**
- `asset`: فیلتر بر اساس ارز (مثال: BTC، ETH)
- `status`: فیلتر بر اساس وضعیت (PENDING، CONFIRMED، COMPLETED)
- `page`: شماره صفحه (پیش‌فرض: 1)
- `page_size`: تعداد نتایج در هر صفحه (پیش‌فرض: 50)

:::

## پارامترهای Query (اختیاری)

| نام پارامتر | نوع    | اجباری | توضیح                                           | نمونه       |
|-------------|--------|--------|-------------------------------------------------|-------------|
| asset       | String | False  | نماد ارز برای فیلتر کردن                        | "BTC"       |
| status      | String | False  | وضعیت واریز (PENDING, CONFIRMED, COMPLETED)     | "COMPLETED" |
| page        | Integer| False  | شماره صفحه (پیش‌فرض: 1)                         | 1           |
| page_size   | Integer| False  | تعداد نتایج در هر صفحه (پیش‌فرض: 50)            | 50          |

## ساختار پاسخ

**پاسخ صفحه‌بندی شده:**

| نام پارامتر | نوع    | توضیحات                                          | نمونه                           |
|-------------|--------|--------------------------------------------------|---------------------------------|
| count       | Integer| تعداد کل واریزها                                 | 25                              |
| next        | String | لینک صفحه بعدی (null اگر صفحه آخر باشد)         | "/api/v1/deposit/list?page=2"   |
| previous    | String | لینک صفحه قبلی (null اگر صفحه اول باشد)         | null                            |
| results     | Array  | آرایه‌ای از واریزها                              | [...]                           |

**ساختار هر واریز در results:**

| نام پارامتر   | نوع     | توضیحات                                        | نمونه                                                    |
|---------------|---------|------------------------------------------------|----------------------------------------------------------|
| id            | String  | شناسه واریز                                     | "12345"                                                  |
| created       | String  | تاریخ و زمان ایجاد                              | "2024-12-10T17:03:57.002570+03:30"                       |
| asset         | String  | نماد ارز واریزی                                 | "BTC"                                                    |
| amount        | String  | مقدار واریز                                     | "0.05"                                                   |
| address       | String  | آدرس واریز                                      | "bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh"            |
| txid          | String  | شناسه تراکنش (Transaction ID)                   | "a1b2c3d4e5f6..."                                        |
| confirmations | Integer | تعداد تاییدیه‌های شبکه                          | 6                                                        |
| status        | String  | وضعیت واریز (PENDING/CONFIRMED/COMPLETED)       | "COMPLETED"                                              |
| network       | String  | شبکه بلاکچین                                    | "Bitcoin"                                                |

```mdx-code-block
<Tabs
defaultValue="request"
values={[
{label: 'درخواست', value: 'request'},
{label: 'پاسخ', value: 'response'},
]}>
<TabItem value="request">
```

**مثال 1: دریافت همه واریزها:**
```bash
GET /api/v1/deposit/list
Authorization: Token YOUR_TOKEN
```

**مثال 2: فیلتر بر اساس ارز:**
```bash
GET /api/v1/deposit/list?asset=BTC
Authorization: Token YOUR_TOKEN
```

**مثال 3: فیلتر بر اساس وضعیت:**
```bash
GET /api/v1/deposit/list?status=COMPLETED
Authorization: Token YOUR_TOKEN
```

```mdx-code-block
</TabItem>
<TabItem value="response">
```

```json
{
    "count": 25,
    "next": "/api/v1/deposit/list?page=2",
    "previous": null,
    "results": [
        {
            "id": "12345",
            "created": "2024-12-10T17:03:57.002570+03:30",
            "asset": "BTC",
            "amount": "0.05",
            "address": "bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh",
            "txid": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6",
            "confirmations": 6,
            "status": "COMPLETED",
            "network": "Bitcoin"
        },
        {
            "id": "12344",
            "created": "2024-12-10T15:20:30.123456+03:30",
            "asset": "ETH",
            "amount": "1.5",
            "address": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",
            "txid": "0x9f3b8e2d1c0a5f6e4d3c2b1a0f9e8d7c6b5a4f3e2d1c0b9a8f7e6d5c4b3a2f1e",
            "confirmations": 35,
            "status": "COMPLETED",
            "network": "Ethereum"
        },
        {
            "id": "12343",
            "created": "2024-12-10T14:10:15.654321+03:30",
            "asset": "USDT",
            "amount": "1000",
            "address": "TYDzsYUEpvnYmQk4zGP9sWWcTEd2MiAtW6",
            "txid": "b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0e1f2g3",
            "confirmations": 3,
            "status": "PENDING",
            "network": "TRC20"
        }
    ]
}
```

```mdx-code-block
</TabItem>
</Tabs>
```

:::tip نکات مهم

### وضعیت‌های واریز:

- **PENDING**: واریز در حال تایید است (تعداد confirmations کافی نیست)
- **CONFIRMED**: واریز تایید شده اما هنوز به کیف پول اضافه نشده
- **COMPLETED**: واریز کامل شده و به کیف پول اضافه شده است

### تعداد تاییدیه‌ها (Confirmations):

هر ارز به تعداد تاییدیه خاصی نیاز دارد تا واریز تکمیل شود:
- **Bitcoin (BTC)**: معمولاً 3-6 تاییدیه
- **Ethereum (ETH)**: معمولاً 12-35 تاییدیه
- **USDT (TRC20)**: معمولاً 20 تاییدیه

زمانی که تعداد confirmations به حد نصاب برسد، وضعیت واریز به COMPLETED تغییر می‌کند.

### شبکه‌های مختلف:

برخی ارزها مثل USDT در چند شبکه قابل واریز هستند:
- TRC20 (Tron)
- ERC20 (Ethereum)
- BEP20 (BSC)

حتماً از شبکه صحیح استفاده کنید تا از از دست رفتن دارایی جلوگیری شود.

:::

:::caution نکته امنیتی

- هرگز آدرس واریز خود را به اشتباه با آدرس دیگران مشترک نکنید
- همیشه قبل از واریز، شبکه (network) را بررسی کنید
- هر آدرس واریز مخصوص یک ارز و شبکه خاص است

:::