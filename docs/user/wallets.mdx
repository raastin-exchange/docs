---
sidebar_position: 4
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# کیف پول‌ها

## لیست کیف پول‌ها

<div dir="ltr" style={{textAlign: 'left'}}>

    GET /api/v1/wallets/

</div>

این API برای دریافت فهرست تمام کیف‌پول‌های کاربر استفاده می‌شود. اطلاعات ارائه‌شده شامل موجودی، موجودی قفل‌شده و ارزش دارایی‌ها به تومان و تتر است.

برای استفاده از این API، لازم است توکن احراز هویت در بخش **Header** درخواست ارسال شود.

## ساختار پاسخ

| نام پارامتر | نوع | توضیحات | نمونه |
|-------------|--------|------------------|-----------|
| symbol | String | نماد ارز | "BTC" |
| precision | Integer | تعداد رقم اعشار | 8 |
| free | String | موجودی آزاد (قابل برداشت) | "8.17096713" |
| free_irt | String | ارزش موجودی آزاد به تومان | "96353803843" |
| balance | String | موجودی کل | "8.17306713" |
| balance_irt | String | ارزش موجودی کل به تومان | "96378567495" |
| balance_usdt | String | ارزش موجودی کل به تتر | "716257.36" |
| can_deposit | Boolean | امکان واریز | true |
| can_withdraw | Boolean | امکان برداشت | true |
| trade_enable | Boolean | امکان معامله | true |
| pin_to_top | Boolean | پین شده در بالای لیست | false |
| market_irt_enable | Boolean | فعال بودن بازار تومانی | true |
| name | String | نام انگلیسی ارز | "bitcoin" |
| name_fa | String | نام فارسی ارز | "بیت‌کوین" |
| logo | String | آدرس لوگو | "https://..." |
| original_symbol | String | نماد اصلی | "BTC" |
| original_name_fa | String | نام فارسی اصلی | "بیت‌کوین" |
| step_size | Integer | دقت مقدار در سفارش | 8 |

```mdx-code-block
<Tabs
    defaultValue="request"
    values={[
        {label: 'درخواست', value: 'request'},
        {label: 'پاسخ', value: 'response'},
    ]}>
<TabItem value="request">
```

```bash
GET /api/v1/wallets/
Authorization: Token YOUR_TOKEN
```

```mdx-code-block
</TabItem>
<TabItem value="response">
```

```json
[
    {
        "symbol": "BTC",
        "precision": 8,
        "free": "8.17096713",
        "free_irt": "96353803843",
        "balance": "8.17306713",
        "balance_irt": "96378567495",
        "balance_usdt": "716257.36",
        "can_deposit": true,
        "can_withdraw": true,
        "trade_enable": true,
        "pin_to_top": false,
        "market_irt_enable": true,
        "name": "bitcoin",
        "name_fa": "بیت‌کوین",
        "logo": "https://cdn.raastin.com/core-media-public/coins/logo/BTC.png",
        "original_symbol": "BTC",
        "original_name_fa": "بیت‌کوین",
        "step_size": 8
    },
    {
        "symbol": "ETH",
        "precision": 8,
        "free": "9.62590636",
        "free_irt": "3827104149",
        "balance": "9.73590636",
        "balance_irt": "3870838364",
        "balance_usdt": "28623.56",
        "can_deposit": true,
        "can_withdraw": true,
        "trade_enable": true,
        "pin_to_top": false,
        "market_irt_enable": true,
        "name": "ethereum",
        "name_fa": "اتریوم",
        "logo": "https://cdn.raastin.com/core-media-public/coins/logo/ETH.png",
        "original_symbol": "ETH",
        "original_name_fa": "اتریوم",
        "step_size": 8
    },
    {
        "symbol": "IRT",
        "precision": 0,
        "free": "2937911559",
        "free_irt": "2937911559",
        "balance": "3323493818",
        "balance_irt": "3323493818",
        "balance_usdt": "24692",
        "can_deposit": true,
        "can_withdraw": true,
        "trade_enable": true,
        "pin_to_top": true,
        "market_irt_enable": false,
        "name": "irt",
        "name_fa": "تومان",
        "logo": "https://cdn.raastin.com/core-media-public/coins/logo/IRT.png",
        "original_symbol": "IRT",
        "original_name_fa": "تومان",
        "step_size": 8
    }
]
```

</TabItem>

</Tabs>

---

## جزئیات یک کیف پول

<div dir="ltr" style={{textAlign: 'left'}}>

    GET /api/v1/wallets/&#123;symbol&#125;/

</div>

این API برای دریافت اطلاعات جزئی یک کیف‌پول مشخص استفاده می‌شود. این endpoint علاوه بر اطلاعات کیف‌پول، جزئیات کامل شبکه‌های قابل استفاده برای واریز و برداشت را نیز بازمی‌گرداند.

برای استفاده از این API، لازم است توکن احراز هویت در بخش **Header** درخواست ارسال شود.

**پارامتر مسیر:**
- `symbol`: نماد ارز (مثال: BTC، ETH، USDT)

### ساختار networks

هر شبکه شامل اطلاعات زیر است:

| نام پارامتر | نوع | توضیحات |
|-------------|--------|------------------|
| network | String | نماد شبکه |
| address | String | آدرس واریز (null اگر هنوز ایجاد نشده) |
| memo | String | ممو واریز (برای شبکه‌هایی که نیاز دارند) |
| can_deposit | Boolean | امکان واریز در این شبکه |
| can_withdraw | Boolean | امکان برداشت از این شبکه |
| withdraw_fee_value | String | کارمزد برداشت |
| min_withdraw | String | حداقل مقدار برداشت |
| min_deposit | String | حداقل مقدار واریز |
| network_name | String | نام کامل شبکه |
| address_regex | String | الگوی اعتبارسنجی آدرس |
| withdraw_precision | Integer | دقت مقدار برداشت |
| need_memo | Boolean | نیاز به ممو برای برداشت |
| min_confirm | Integer | حداقل تاییدیه برای واریز |
| contract | String | آدرس قرارداد توکن |
| contract_link | String | لینک قرارداد در Explorer |
| arrival_time | Integer | زمان تقریبی رسیدن (به ساعت) |


```mdx-code-block
<Tabs
    defaultValue="request"
    values={[
        {label: 'درخواست', value: 'request'},
        {label: 'پاسخ', value: 'response'},
    ]}>
<TabItem value="request">
```

```bash
GET /api/v1/wallets/USDT/
Authorization: Token YOUR_TOKEN
```

```mdx-code-block
</TabItem>
<TabItem value="response">
```

```json
{
    "symbol": "USDT",
    "precision": 8,
    "free": "915875297256.43972526",
    "free_irt": "123274067384825017",
    "balance": "915875297608.43972526",
    "balance_irt": "123274067432203161",
    "balance_usdt": "915875297608.43",
    "can_deposit": true,
    "can_withdraw": true,
    "trade_enable": true,
    "pin_to_top": false,
    "market_irt_enable": true,
    "name": "tether",
    "name_fa": "تتر",
    "logo": "https://cdn.raastin.com/core-media-public/coins/logo/USDT.png",
    "original_symbol": "USDT",
    "original_name_fa": "تتر",
    "step_size": 8,
    "networks": [
        {
            "network": "TRX",
            "address": "TLjKytefz1kYk7D986ySvygbMeMda8c87o",
            "memo": "",
            "can_deposit": true,
            "can_withdraw": true,
            "withdraw_commission": "1",
            "withdraw_fee_value": "1",
            "min_withdraw": "1",
            "min_deposit": "0.00000001",
            "network_name": "Tron (TRC20)",
            "address_regex": "^T[1-9A-HJ-NP-Za-km-z]{33}$",
            "memo_regex": "",
            "withdraw_precision": 0,
            "need_memo": false,
            "min_confirm": 100,
            "slow_withdraw": false,
            "memo_title_fa": "آدرس تگ یا ممو",
            "memo_name_fa": "ممو",
            "memo_name": "memo",
            "deposit_need_memo": false,
            "withdraw_allow_memo": false,
            "contract": "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",
            "contract_link": "https://tronscan.org/#/token20/TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",
            "arrival_time": 2
        },
        {
            "network": "BSC",
            "address": "0xb16D1430521f01A5Ae6683485465c303Fc136665",
            "memo": "",
            "can_deposit": true,
            "can_withdraw": true,
            "withdraw_commission": "1",
            "withdraw_fee_value": "1",
            "min_withdraw": "1",
            "min_deposit": "0.00000001",
            "network_name": "BNB Smart Chain (BEP20)",
            "address_regex": "",
            "memo_regex": "",
            "withdraw_precision": 1,
            "need_memo": false,
            "min_confirm": 100,
            "slow_withdraw": false,
            "memo_title_fa": "آدرس تگ یا ممو",
            "memo_name_fa": "ممو",
            "memo_name": "memo",
            "deposit_need_memo": false,
            "withdraw_allow_memo": false,
            "contract": "0x55d398326f99059ff775485246999027b3197955",
            "contract_link": "https://bscscan.com/token/0x55d398326f99059ff775485246999027b3197955",
            "arrival_time": 2
        }
    ]
}
```

</TabItem>

</Tabs>

---

## موجودی کیف پول

<div dir="ltr" style={{textAlign: 'left'}}>

    GET /api/v1/wallets/&#123;symbol&#125;/balance/

</div>

این API برای دریافت سریع موجودی یک کیف‌پول مشخص استفاده می‌شود. این endpoint نسبت به مورد قبلی اطلاعات کمتری بازمی‌گرداند و از سرعت بالاتری برخوردار است.

برای استفاده از این API، لازم است توکن احراز هویت در بخش **Header** درخواست ارسال شود.

**پارامتر مسیر:**
- `symbol`: نماد ارز (مثال: BTC، ETH، USDT)


```mdx-code-block
<Tabs
    defaultValue="request"
    values={[
        {label: 'درخواست', value: 'request'},
        {label: 'پاسخ', value: 'response'},
    ]}>
<TabItem value="request">
```

```bash
GET /api/v1/wallets/USDT/balance/
Authorization: Token YOUR_TOKEN
```

```mdx-code-block
</TabItem>
<TabItem value="response">
```

```json
{
    "symbol": "USDT",
    "asset": "USDT",
    "balance": "915875297256.43972526"
}
```

:::caution توجه
فیلد `balance` در این endpoint موجودی **آزاد (free)** را برمی‌گرداند، نه موجودی کل!
:::

</TabItem>

</Tabs>

:::tip نکات مهم

### محاسبه موجودی:
```
موجودی کل (balance) = موجودی آزاد (free) + موجودی قفل شده (locked)
```

### موجودی قفل شده (locked):
موجودی که در سفارش‌های باز قفل شده است. این مقدار شامل:
- سفارش‌های limit در orderbook
- سفارش‌های stop-loss که هنوز trigger نشده‌اند
- سفارش‌های در حال پردازش

زمانی که سفارش لغو یا اجرا شود، موجودی قفل شده به موجودی آزاد برمی‌گردد.

### ارزش‌های محاسبه شده:
- `balance_irt`: ارزش موجودی به تومان (بر اساس آخرین قیمت بازار)
- `balance_usdt`: ارزش موجودی به تتر (بر اساس آخرین قیمت بازار)

این مقادیر لحظه‌ای محاسبه می‌شوند و بر اساس نرخ لحظه‌ای بازار است.

### محدودیت‌های واریز و برداشت:
- `can_deposit`: اگر false باشد، امکان واریز این ارز وجود ندارد (معمولاً موقتی)
- `can_withdraw`: اگر false باشد، امکان برداشت این ارز وجود ندارد (معمولاً برای امنیت یا تعمیرات)

:::

:::caution نکته امنیتی

این APIها اطلاعات حساس کاربر را برمی‌گردانند. حتماً:
- توکن خود را ایمن نگه دارید
- از HTTPS استفاده کنید
- توکن را در سمت client ذخیره نکنید (به جز storage امن)

:::
