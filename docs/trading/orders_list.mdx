---
sidebar_position: 2
---

# لیست سفارش‌ها

<div style={{textAlign: 'left'}}>

    GET /api/v1/market/orders

</div>

:::info توضیح

این API برای دریافت لیست تمام سفارش‌های کاربر (فعال و تاریخچه) استفاده می‌شود. نتایج به صورت صفحه‌بندی شده (paginated) برگردانده می‌شوند.

برای استفاده از این API لازم است توکن احراز هویت در header ارسال شود.

:::

## پارامترهای Query (اختیاری)

| نام پارامتر | نوع    | اجباری | توضیح                                           | نمونه       |
|-------------|--------|--------|-------------------------------------------------|-------------|
| symbol      | String | False  | نماد بازار برای فیلتر کردن                      | "BTCIRT"    |
| status      | String | False  | وضعیت سفارش (NEW, PENDING, FILLED, CANCELED)   | "NEW"       |
| page        | Integer| False  | شماره صفحه (پیش‌فرض: 1)                         | 1           |
| page_size   | Integer| False  | تعداد نتایج در هر صفحه (پیش‌فرض: 50، حداکثر: 100)| 50          |

## ساختار پاسخ

**پاسخ صفحه‌بندی شده:**

| نام پارامتر | نوع    | توضیحات                                          | نمونه                           |
|-------------|--------|--------------------------------------------------|---------------------------------|
| count       | Integer| تعداد کل سفارش‌ها                                | 150                             |
| next        | String | لینک صفحه بعدی (null اگر صفحه آخر باشد)         | "/api/v1/market/orders?page=2"  |
| previous    | String | لینک صفحه قبلی (null اگر صفحه اول باشد)         | null                            |
| results     | Array  | آرایه‌ای از سفارش‌ها                             | [...]                           |

**ساختار هر سفارش در results:**

| نام پارامتر      | نوع     | توضیحات                                        | نمونه                              |
|------------------|---------|------------------------------------------------|------------------------------------|
| id               | String  | شناسه سفارش                                    | "620881"                           |
| client_order_id  | String  | شناسه اختصاصی کاربر (اگر ارسال شده باشد)      | "my-order-123"                     |
| created          | String  | تاریخ و زمان ایجاد سفارش                       | "2024-12-10T17:03:57.002570+03:30" |
| symbol           | String  | نماد بازار                                     | "BTCIRT"                           |
| amount           | String  | مقدار کل سفارش                                 | "0.001"                            |
| filled_amount    | String  | مقدار انجام شده                                | "0.0005"                           |
| filled_percent   | String  | درصد انجام شده                                 | "50%"                              |
| price            | String  | قیمت سفارش                                     | "3500000000"                       |
| filled_price     | String  | قیمت میانگین معاملات                           | "3498000000"                       |
| side             | String  | نوع سفارش (buy/sell)                           | "buy"                              |
| fill_type        | String  | نوع اجرا (limit/market/stop_loss)              | "limit"                            |
| status           | String  | وضعیت سفارش (NEW/PENDING/FILLED/CANCELED)      | "PARTIALLY_FILLED"                 |
| market           | String  | نوع بازار (SPOT/MARGIN)                        | "SPOT"                             |
| time_in_force    | String  | زمان اعتبار (GTC/IOC/FOK)                      | "GTC"                              |

## درخواست

```bash
GET /api/v1/market/orders
Authorization: Token YOUR_TOKEN
```

**مثال با فیلتر:**
```bash
GET /api/v1/market/orders?symbol=BTCIRT&status=NEW&page=1&page_size=20
Authorization: Token YOUR_TOKEN
```

## پاسخ

```json
{
    "count": 150,
    "next": "/api/v1/market/orders?page=2",
    "previous": null,
    "results": [
        {
            "id": "1234567",
            "client_order_id": "my-order-123",
            "created": "2024-12-10T16:06:29.953660+03:30",
            "symbol": "BTCIRT",
            "amount": "0.001",
            "filled_amount": "0.0005",
            "filled_percent": "50%",
            "price": "3500000000",
            "filled_price": "3498000000",
            "side": "buy",
            "fill_type": "limit",
            "status": "PARTIALLY_FILLED",
            "market": "SPOT",
            "time_in_force": "GTC",
            "trigger_price": null,
            "allow_cancel": true,
            "trades": []
        },
        {
            "id": "1234566",
            "client_order_id": null,
            "created": "2024-12-10T15:30:15.123456+03:30",
            "symbol": "ETHIRT",
            "amount": "0.5",
            "filled_amount": "0.5",
            "filled_percent": "100%",
            "price": "120000000",
            "filled_price": "120000000",
            "side": "sell",
            "fill_type": "limit",
            "status": "FILLED",
            "market": "SPOT",
            "time_in_force": "GTC",
            "trigger_price": null,
            "allow_cancel": false,
            "trades": []
        }
    ]
}
```

:::tip نکات مهم

### وضعیت‌های سفارش:

- **NEW**: سفارش جدید ثبت شده، در صف اجرا
- **PENDING**: در حال بررسی یا در انتظار trigger (برای stop_loss)
- **PARTIALLY_FILLED**: بخشی از سفارش اجرا شده
- **FILLED**: سفارش کاملاً اجرا شده
- **CANCELED**: سفارش لغو شده

### فیلتر کردن:

می‌توانید سفارش‌ها را بر اساس موارد زیر فیلتر کنید:
- `symbol`: فقط سفارش‌های یک بازار خاص
- `status`: فقط سفارش‌های با وضعیت خاص
- هر دو فیلتر را می‌توان ترکیب کرد

:::
