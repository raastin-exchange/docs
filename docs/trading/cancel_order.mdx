---
sidebar_position: 3
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# لغو سفارش

<div dir="ltr" style={{textAlign: 'left'}}>

    POST /api/v1/market/orders/cancel/

</div>


این API برای لغو یک سفارش باز (NEW یا PENDING) استفاده می‌شود. پس از لغو موفق، موجودی قفل شده به کیف پول آزاد برمی‌گردد. برای استفاده از این API لازم است توکن احراز هویت در header ارسال شود.

:::info نکته

فقط سفارش‌هایی که هنوز به طور کامل اجرا نشده‌اند قابل لغو هستند. سفارش‌های با وضعیت FILLED یا CANCELED قابل لغو نیستند.

:::

## پارامترهای درخواست

یکی از دو پارامتر زیر الزامی است:

| نام پارامتر     | نوع    | اجباری | توضیح                          |
| --------------- | ------ | ------ | ------------------------------ |
| id              | String | شرطی   | شناسه سفارش                    |
| client_order_id | String | شرطی   | شناسه اختصاصی سفارش توسط کاربر |

```mdx-code-block
<Tabs
    defaultValue="request"
    values={[
        {label: 'درخواست', value: 'request'},
        {label: 'پاسخ', value: 'response'},
    ]}>
<TabItem value="request">
```

**لغو با استفاده از id:**

```json
{
  "id": "1234567"
}
```

**لغو با استفاده از client_order_id:**

```json
{
  "client_order_id": "order-123"
}
```

```mdx-code-block
</TabItem>
<TabItem value="response">
```

```json
{
  "id": "1234567",
  "canceled_at": "2024-12-10T16:45:30.123456+03:30"
}
```

```mdx-code-block
</TabItem>
</Tabs>
```

:::tip نکات مهم

- **فقط سفارش‌های باز** (NEW یا PENDING) قابل لغو هستند
- پس از لغو موفق، موجودی قفل شده  به کیف پول  برمی‌گردد
- می‌توانید از `id` یا `client_order_id` برای شناسایی سفارش استفاده کنید

:::

:::caution خطاهای رایج

- **Order not found:** سفارش با شناسه داده شده یافت نشده یا متعلق به شما نیست
- **Order cannot be canceled:** سفارش در وضعیتی است که قابل لغو نیست (مثلاً FILLED یا CANCELED)

:::
